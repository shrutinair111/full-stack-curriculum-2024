<!DOCTYPE html>
<html>

<head>
  <title>Weather APIs</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
  <div id="main-container">
    <h4 id="lat"></h4>
    <h4 id="lon"></h4>
    <h4 id="temp"></h4>
    <button id="getTemp" onclick="getData()">Get Temp of Austin</button>
  </div>
</body>

<script>
  // API key used to authenticate our requests to the OpenWeather API.
  const apiKey = "7e5526e73dc666c9bc90f0514d93d826";

  // Declare variables to store temperature, latitude, and longitude.
  let temp;
  let lat;
  let lon;

  function getData() {
    let apiCall = 'http://api.openweathermap.org/geo/1.0/direct?q=Austin,TX,USA&limit=5&appid=7e5526e73dc666c9bc90f0514d93d826';
    fetch(apiCall)
      .then((response) => response.json())
      .then((data) => {
        console.log(data);

        console.log(data[0])
        console.log(data[0].lat)
        lat = data[0].lat
        lon = data[0].lon

        renderLatLon()

        getTemp()
      })
  }
  function renderLatLon() {
    document.querySelector("#lat").innerHTML = "Lattitude :" +lat
    document.querySelector("#lon").innerHTML = "Longitude :" +lon

  }

  function getTemp() {
    apiCall = 'https://api.openweathermap.org/data/2.5/weather?lat=30.3212091&lon=-97.61985475284649&appid=7e5526e73dc666c9bc90f0514d93d826&units=imperial' ;
    fetch(apiCall)
      .then((response) => response.json() )
      .then((data) => {
        console.log(data)

        temp = data.main.temp;
        renderTemp()
        
      })
  
  }

  function renderTemp() {
    document.querySelector("#temp").innerHTML
    = "temperature: " + temp
  }
</script>

</html>
